-- Dữ liệu key được nhúng trực tiếp
local data = {
    ["0KTP6V9SD2QUVQSP"] = {
        created_date = "2025-03-27 21:17:20",
        expiry_date = "2025-03-28 21:17:20",
        is_used = false,
        used_by = "", 
        duration_days = 1,
        usernames = {
        }
    },
    ["HV042MDR8X364CDS"] = {
        created_date = "2025-03-27 21:32:33",
        expiry_date = "2025-03-28 21:32:33",
        is_used = false,
        used_by = "", 
        duration_days = 1,
        usernames = {
        }
    },
    ["HRF9RML4HKHWBKXJ"] = {
        created_date = "2025-03-27 22:13:53",
        expiry_date = "2025-04-26 13:26:00",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
            "yurikayekim123",
        }
    },
    ["R3R4SYQAPAJII94J"] = {
        created_date = "2025-03-27 22:13:56",
        expiry_date = "2025-04-26 13:26:25",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
            "nurssffin",
        }
    },
    ["ZXJBWK21IWEHV88V"] = {
        created_date = "2025-03-27 22:14:00",
        expiry_date = "2025-04-26 13:26:44",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
            "nurssffin1",
        }
    },
    ["MY60FVFZAZKQNU39"] = {
        created_date = "2025-03-27 22:14:04",
        expiry_date = "2025-04-26 13:26:59",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
            "nursworldph",
        }
    },
    ["XRLJQJL2T7XDIH5A"] = {
        created_date = "2025-03-27 22:14:09",
        expiry_date = "2025-04-27 17:42:35",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
            "Demonlordaizen20",
        }
    },
    ["BB0IXYW5U9INXNJ6"] = {
        created_date = "2025-03-28 01:37:40",
        expiry_date = "2025-04-07 01:37:40",
        is_used = false,
        used_by = "", 
        duration_days = 10,
        usernames = {
        }
    },
    ["E4M18KAGF962LRV1"] = {
        created_date = "2025-04-04 00:09:39",
        expiry_date = "None",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["NU49VH7PGED928GJ"] = {
        created_date = "2025-04-04 00:59:57",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["3XXA3ZQZIT7JNQXS"] = {
        created_date = "2025-04-04 01:00:56",
        expiry_date = "2025-05-02 01:01:05",
        is_used = true,
        used_by = "123456789", 
        duration_days = 28,
        usernames = {
            "TestUser",
        }
    },
    ["KZ397VNGIF9IU1BT"] = {
        created_date = "2025-04-04 01:05:58",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["UTK1GIPDN81SULJY"] = {
        created_date = "2025-04-04 01:06:08",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["W6CSCCGHE6AFT59R"] = {
        created_date = "2025-04-04 01:06:18",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["XWOT4AC9CIIHGB4M"] = {
        created_date = "2025-04-04 01:06:27",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["1ASWAGXR725L3H5O"] = {
        created_date = "2025-04-04 01:06:37",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["7H39T41UV5PJUNQX"] = {
        created_date = "2025-04-04 01:06:47",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["H5MEB1BZB657TBPF"] = {
        created_date = "2025-04-04 01:06:57",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["12QW9CXQFIAHGGNL"] = {
        created_date = "2025-04-04 01:07:07",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["BFWSYTIJ9F8LM7OU"] = {
        created_date = "2025-04-04 01:07:16",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["NJFTXX9J6BMLJ961"] = {
        created_date = "2025-04-04 01:07:26",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["C48NB6NCUCE48NUO"] = {
        created_date = "2025-04-04 01:13:52",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["PE5K9NDACGFF4RG7"] = {
        created_date = "2025-04-04 01:14:05",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["JTHORX5T46D18N6X"] = {
        created_date = "2025-04-04 01:14:17",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["UJEDWLDGCDQCSJ2N"] = {
        created_date = "2025-04-04 01:14:30",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["RFXDXJD6OMMKOQRI"] = {
        created_date = "2025-04-04 01:14:43",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["MMSGNF9CB47GY4MX"] = {
        created_date = "2025-04-04 01:14:55",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["V7AQRW0KKJZ6NGB9"] = {
        created_date = "2025-04-04 01:15:08",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["8U838H0SB3Z2CTSN"] = {
        created_date = "2025-04-04 01:15:21",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["I6QGXH2H9TIJLJFV"] = {
        created_date = "2025-04-04 01:15:33",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["G2IWZO93DB5XUD9S"] = {
        created_date = "2025-04-04 01:15:46",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["PJHNHUI3XE2E1VL3"] = {
        created_date = "2025-04-04 01:19:10",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 1,
        usernames = {
        }
    },
    ["5XO5BOWTB9R0HWYI"] = {
        created_date = "2025-04-04 01:22:13",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 1,
        usernames = {
        }
    },
    ["K8SRFOXH6ZNB5GMX"] = {
        created_date = "2025-04-04 01:27:18",
        expiry_date = "2025-04-05 01:27:58",
        is_used = true,
        used_by = "880845879404285952", 
        duration_days = 1,
        usernames = {
            "a",
            "av",
        }
    },
    ["W2AB2FGIGTIRJ1G0"] = {
        created_date = "2025-04-04 01:33:04",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["NLO8TG9V1D5M3JRT"] = {
        created_date = "2025-04-04 01:33:06",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["6CMYE75HVVXYMGA5"] = {
        created_date = "2025-04-04 01:33:08",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["GI785E3WBTK1YOYC"] = {
        created_date = "2025-04-04 01:33:10",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["WJD1LA3IKUYFFW55"] = {
        created_date = "2025-04-04 01:33:11",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["L2TTY0RUTJSKD9NE"] = {
        created_date = "2025-04-04 01:33:13",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["K8UMNMTU7FDWKWEZ"] = {
        created_date = "2025-04-04 01:33:14",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["QB5TXRZJQQSIU9CW"] = {
        created_date = "2025-04-04 01:33:16",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["DKU15TQG1CA7QYR6"] = {
        created_date = "2025-04-04 01:33:18",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["Y89CENZWCWX171Y4"] = {
        created_date = "2025-04-04 01:33:19",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["Y218QUHLXCT1GN2E"] = {
        created_date = "2025-04-04 01:33:34",
        expiry_date = "2025-06-03 22:52:31",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
            "dialelo",
        }
    },
    ["469UJRYNFVJC0CU3"] = {
        created_date = "2025-04-04 01:33:36",
        expiry_date = "2025-06-03 22:56:29",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
            "AEGG0N",
        }
    },
    ["ZLSP7BH97R4P5GPA"] = {
        created_date = "2025-04-04 01:33:38",
        expiry_date = "2025-06-03 22:58:11",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
            "Bubblestar505",
        }
    },
    ["Q9XMXBQG55PH3G4G"] = {
        created_date = "2025-04-04 01:33:39",
        expiry_date = "2025-06-03 22:58:30",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
            "Puffshroom2002",
        }
    },
    ["0VG01743GELWGS4F"] = {
        created_date = "2025-04-04 01:33:41",
        expiry_date = "2025-06-03 22:58:54",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
            "Buttercup_jelly03",
        }
    },
    ["5J4NWPRXIO13GIS0"] = {
        created_date = "2025-04-04 01:33:43",
        expiry_date = "2025-06-03 22:59:09",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
            "BlossomRose204",
        }
    },
    ["D5FGDTYAVCNGKTH1"] = {
        created_date = "2025-04-04 01:33:44",
        expiry_date = "2025-06-03 22:59:25",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
            "EDD_0505",
        }
    },
    ["L315IIPG5PNAJQJC"] = {
        created_date = "2025-04-04 01:33:46",
        expiry_date = "2025-06-03 22:59:42",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
            "PattyStraw",
        }
    },
    ["54X2V7R3RUDXHK25"] = {
        created_date = "2025-04-04 01:33:47",
        expiry_date = "2025-06-03 22:59:58",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
            "KrispyKreme38383",
        }
    },
    ["IO1MZP3ES63MK4QO"] = {
        created_date = "2025-04-04 01:33:49",
        expiry_date = "2025-06-03 23:00:19",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
            "DunkinDonuts57575",
        }
    },
    ["7RLO59EEQJDQ86UY"] = {
        created_date = "2025-04-04 01:34:38",
        expiry_date = "2025-05-24 23:48:13",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
            "S4ch3",
        }
    },
    ["VIMM5OOHVF63POFW"] = {
        created_date = "2025-04-04 01:34:39",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["6LSHMS8NBFZFFZ8E"] = {
        created_date = "2025-04-04 01:34:41",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["NVZ20JLU9VLEODSH"] = {
        created_date = "2025-04-04 01:34:43",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["QTBP0CKCY1M27ALU"] = {
        created_date = "2025-04-04 01:34:44",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["9NU0T9NT9VKZXDFU"] = {
        created_date = "2025-04-04 01:35:31",
        expiry_date = "2025-04-05 01:35:51",
        is_used = true,
        used_by = "880845879404285952", 
        duration_days = 1,
        usernames = {
            "asd",
        }
    },
    ["PHTAOZX0OFV1PYB2"] = {
        created_date = "2025-04-09 00:12:00",
        expiry_date = "2025-04-16 00:14:27",
        is_used = true,
        used_by = "880845879404285952", 
        duration_days = 7,
        usernames = {
            "qhroblox1210",
        }
    },
    ["3NS9EBI90DGLEUN1"] = {
        created_date = "2025-04-09 00:29:53",
        expiry_date = "2025-04-10 00:36:28",
        is_used = true,
        used_by = "880845879404285952", 
        duration_days = 1,
        usernames = {
            "phingau1",
        }
    },
    ["S650089O5B0W9RP7"] = {
        created_date = "2025-04-09 01:06:10",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 7,
        usernames = {
        }
    },
    ["L3SNUJ03JKYGJAVX"] = {
        created_date = "2025-04-21 23:01:07",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 7,
        usernames = {
        }
    },
    ["WKKUJ63XCECF62EZ"] = {
        created_date = "2025-04-21 23:01:08",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 7,
        usernames = {
        }
    },
    ["AMUYNK5UO0ESDSIE"] = {
        created_date = "2025-04-21 23:01:10",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 7,
        usernames = {
        }
    },
    ["XHDQ2SRPH97YMWJT"] = {
        created_date = "2025-04-21 23:01:11",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 7,
        usernames = {
        }
    },
    ["CY3JVAH7UICV4J5C"] = {
        created_date = "2025-04-21 23:01:13",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 7,
        usernames = {
        }
    },
    ["59L0D44ICM96J1GK"] = {
        created_date = "2025-04-27 02:18:20",
        expiry_date = "2025-04-28 03:41:51",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 1,
        usernames = {
            "maximus001900",
        }
    },
    ["Z5OGHPRXJJQKZ4MX"] = {
        created_date = "2025-04-29 15:39:08",
        expiry_date = "2025-05-14 09:09:54",
        is_used = true,
        used_by = "473292791640883200", 
        duration_days = 7,
        usernames = {
            "leanhclone2",
        }
    },
    ["ZTO5UFAO8NN2EC73"] = {
        created_date = "2025-04-29 15:39:10",
        expiry_date = "2025-05-14 09:10:24",
        is_used = true,
        used_by = "473292791640883200", 
        duration_days = 7,
        usernames = {
            "leanhclone3",
        }
    },
    ["L1I52SUN53GFSO5S"] = {
        created_date = "2025-05-05 23:37:36",
        expiry_date = "2025-05-06 23:37:58",
        is_used = true,
        used_by = "880845879404285952", 
        duration_days = 1,
        usernames = {
            "maxi",
        }
    },
    ["3XA3DAEIYY7YU383"] = {
        created_date = "2025-05-06 22:52:26",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 28,
        usernames = {
        }
    },
    ["39T934IDZ9C45QBW"] = {
        created_date = "2025-03-27 22:14:13",
        expiry_date = "2025-04-24 22:14:13",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
        }
    },
    ["VLU9BVUGDMEJ1APW"] = {
        created_date = "2025-03-27 22:14:17",
        expiry_date = "2025-04-24 22:14:17",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
        }
    },
    ["WNQIME9JVSKRKMHC"] = {
        created_date = "2025-03-27 22:14:20",
        expiry_date = "2025-04-24 22:14:20",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
        }
    },
    ["CZ41SE3RUJZRAN1C"] = {
        created_date = "2025-03-27 22:14:23",
        expiry_date = "2025-04-24 22:14:23",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
        }
    },
    ["L2COQ42NOIFNKZAJ"] = {
        created_date = "2025-03-27 22:15:55",
        expiry_date = "2025-04-24 22:15:55",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
        }
    },
    ["1J5X5ZEOAMVTGLTE"] = {
        created_date = "2025-03-27 22:15:59",
        expiry_date = "2025-04-24 22:15:59",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
        }
    },
    ["BVARF8MSIEG5DVU1"] = {
        created_date = "2025-03-27 22:16:02",
        expiry_date = "2025-04-24 22:16:02",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
        }
    },
    ["5RGJASRZFUDEOHD6"] = {
        created_date = "2025-03-27 22:16:05",
        expiry_date = "2025-04-24 22:16:05",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
        }
    },
    ["9DP4QBTN6VYRGEOX"] = {
        created_date = "2025-03-27 22:16:08",
        expiry_date = "2025-04-24 22:16:08",
        is_used = true,
        used_by = "714479512837947423", 
        duration_days = 28,
        usernames = {
        }
    },
    ["4GADF1WZRZJXUGH6"] = {
        created_date = "2025-04-21 22:04:53",
        expiry_date = "2025-04-28 22:12:41",
        is_used = true,
        used_by = "473292791640883200", 
        duration_days = 7,
        usernames = {
        }
    },
    ["YVQ8F2REESRZ35I0"] = {
        created_date = "2025-04-22 09:39:27",
        expiry_date = "2025-04-29 09:41:19",
        is_used = true,
        used_by = "473292791640883200", 
        duration_days = 7,
        usernames = {
        }
    },
    ["SB424AX72U3BSVW6"] = {
        created_date = "2025-06-11 04:08:48",
        expiry_date = "",
        is_used = false,
        used_by = "", 
        duration_days = 7,
        usernames = {
        }
    },
}

-- Lấy LocalPlayer
local player = game.Players.LocalPlayer
local username = player.Name

-- Kiểm tra username trong danh sách
local function isUsernameAllowed(name)
    for _, keyData in pairs(data) do
        if keyData.usernames then
            for _, allowedName in ipairs(keyData.usernames) do
                if name == allowedName then
                    local function parseDate(dateStr)
                        local year, month, day, hour, min, sec = dateStr:match("(%d+)-(%d+)-(%d+) (%d+):(%d+):(%d+)")
                        return os.time({year=tonumber(year), month=tonumber(month), day=tonumber(day),
                                     hour=tonumber(hour), min=tonumber(min), sec=tonumber(sec)})
                    end
                    
                    local expiryTime = parseDate(keyData.expiry_date)
                    local currentTime = os.time()
                    
                    if currentTime <= expiryTime then
                        return true
                    end
                end
            end
        end
    end
    return false
end

-- Execute script if username is valid / Thực thi script nếu username hợp lệ
if isUsernameAllowed(username) then
    loadstring(game:HttpGet("https://raw.githubusercontent.com/maihoangphi2531/Hagfyo_leader/refs/heads/main/level"))()
else
    local StarterGui = game:GetService("StarterGui")
    local discordLink = "https://discord.gg/2Sr2zWZD"
    
    -- Copy link to clipboard / Copy link vào clipboard
    setclipboard(discordLink)
    
    -- Show notification / Hiển thị thông báo
    StarterGui:SetCore("SendNotification", {
        Title = "⚠️ NOTICE / THÔNG BÁO ⚠️",
        Text = "Discord link copied! Join Discord to buy key / Link Discord đã được copy! Hãy vào Discord để mua key.",
        Duration = 10000000000000000000000,
        Button1 = "OK"
    })
    
    -- Show warning message / Hiển thị cảnh báo
    warn("Username is not allowed to run this script or key has expired / Username không được phép chạy script này hoặc key đã hết hạn.")
    
    -- Show price notification / Hiển thị thông báo giá
    StarterGui:SetCore("SendNotification", {
        Title = "💰 PRICE / GIÁ KEY 💰",
        Text = "1 week/tuần: 0.5$ or/hoặc 10,000 VNĐ",
        Duration = 100000000000000000000000,
        Button1 = "OK"
    })
    
    task.wait(2)
    
    -- Show guide notification / Hiển thị hướng dẫn
    StarterGui:SetCore("SendNotification", {
        Title = "💡 GUIDE / HƯỚNG DẪN 💡", 
        Text = "Paste (Ctrl+V) Discord link to browser to join server! / Paste (Ctrl+V) link Discord vào trình duyệt để tham gia server!",
        Duration = 100000000000000000000000,
        Button1 = "OK"
    })
end
